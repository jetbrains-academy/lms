{% set request_user = request.user -%}
<ul class="list-unstyled">
  {% if can_view_personal_data and enrollments %}
    <li>
      <h4>{{ profile_user.first_name }} attended and completed the following courses:</h4>
      <ul>
        {% for enrollment in enrollments %}
          <li>
            <a href="{{ enrollment.course.get_absolute_url() }}">
              {{ enrollment.course }}
            </a> /{{ enrollment.grade_display|lower }}/
          </li>
        {% endfor %}
      </ul>
    </li>
  {% endif %}

  {% if profile_user.is_teacher %}
    <li>
      {% if profile_user.teaching_set.all() %}
        <h4>Course teacher:</h4>
        <ul class="">
          {% for course in profile_user.teaching_set.all() %}
            <li>
              <a href="{{ course.get_absolute_url() }}">{{ course }}</a>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </li>
  {% endif %}
</ul>
{% if request_user.is_authenticated %}
  <div class="accounts">
    <table class="table table-condensed table-striped">
      {% if can_view_personal_data %}
        {% if invitation and request_user.is_curator %}
          <tr>
            <td>Invitation</td>
            <td>
              <a target="_blank" href="{{ url('admin:learning_invitation_change', object_id=invitation.pk) }}">
              {{ invitation.name }}
              </a>
            </td>
          </tr>
        {% endif %}
        {% if academic_disciplines %}
        <tr>
          <td>Academic field</td>
          <td>{{ academic_disciplines }}</td>
        </tr>
        {% endif %}
        <tr>
          <td>{% trans %}Phone{% endtrans %}</td>
          <td>{{ profile_user.phone|default("—", True) }}</td>
        </tr>
        <tr>
          <td>{% trans %}Workplace{% endtrans %}</td>
          <td>{{ profile_user.workplace|default("—", True) }}</td>
        </tr>
        <tr>
          <td>{% trans %}Date of birth{% endtrans %}</td>
          <td>
            {% if profile_user.birth_date %}{{ profile_user.birth_date|date("d.m.Y") }}{% else %}—{% endif %}
          </td>
        </tr>
      {% endif %}
      <tr>
        <td>{% trans %}Email{% endtrans %}</td>
        <td>
          {{ profile_user.email }}
          {% if profile_user.is_email_suspended %}
            <div class="text-danger">
              Email sending is paused (Status {{ profile_user.email_suspension_details['status'] }}). Please contact the course managers for details.
            </div>
          {% endif %}
        </td>
      </tr>
      <tr>
        <td>{% trans %}Time zone{% endtrans %}</td>
        <td>{{ time_zone }}</td>
      </tr>
      <tr>
        <td>Telegram</td>
        <td>{% if profile_user.telegram_username %}
          <a href="https://t.me/{{ profile_user.telegram_username }}" target="_blank">{{ profile_user.telegram_username }}</a>
        {% else %}
          —
        {% endif %}
        </td>
      </tr>
      <tr>
        <td>GitHub</td>
        <td>{% if profile_user.github_login %}
          <a href="https://github.com/{{ profile_user.github_login }}" target="_blank">{{ profile_user.github_login }}</a>
        {% else %}
          —
        {% endif %}
        </td>
      </tr>
      <tr>
        <td>Codeforces</td>
        <td>
          {% if profile_user.codeforces_login %}
            <a href="https://codeforces.com/profile/{{ profile_user.codeforces_login }}"
               target="_blank">{{ profile_user.codeforces_login }}</a>
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
      <tr>
        <td>Cogniterra</td>
        <td>
          {% if profile_user.cogniterra_user_id %}
            <a href="https://cogniterra.org/users/{{ profile_user.cogniterra_user_id }}"
               target="_blank">https://cogniterra.org/users/{{ profile_user.cogniterra_user_id }}</a>
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
      <tr>
        <td>JetBrains</td>
        <td>
          {% if profile_user.jetbrains_account %}
            {{ profile_user.jetbrains_account }}
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
      <tr>
        <td>LinkedIn</td>
        <td>
          {% if profile_user.linkedin_profile %}
            <a href="https://www.linkedin.com/in/{{ profile_user.linkedin_profile }}"
               target="_blank">{{ profile_user.linkedin_profile }}</a>
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
      {% if icalendars %}
        <tr>
          <td>iCal calendars</td>
          <td>
            {% for icalendar in icalendars %}
              <a target="_blank" href="{{ icalendar.url }}">{{ icalendar.title }}</a>{% if not loop.last %}&nbsp;&nbsp;{% endif %}
            {% endfor %}
          </td>
        </tr>
      {% endif %}
    </table>
  </div>
{% endif %}

{% if request_user.is_authenticated and profile_user.private_contacts.strip() %}
  <div class="contact-info">
    <h4>{% trans %}Contact information{% endtrans %}</h4>
    <div class="ubertext">
      {{ profile_user.private_contacts|markdown("user_private_contacts", 3600, profile_user.pk, profile_user.modified) }}
    </div>
  </div>
{% endif %}
